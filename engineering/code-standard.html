<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ä»‹ç» | hx&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/blog/img/logo.png">
    <meta name="description" content="hx&#39;s blog">
    <meta name="keywords" content="blog">
    
    <link rel="preload" href="/blog/assets/css/0.styles.8b6be189.css" as="style"><link rel="preload" href="/blog/assets/js/app.c5beb7e7.js" as="script"><link rel="preload" href="/blog/assets/js/2.19337781.js" as="script"><link rel="preload" href="/blog/assets/js/8.5bf72cf8.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.f7f8c2cf.js"><link rel="prefetch" href="/blog/assets/js/11.fdf6ac81.js"><link rel="prefetch" href="/blog/assets/js/12.71c58aee.js"><link rel="prefetch" href="/blog/assets/js/13.9fa69850.js"><link rel="prefetch" href="/blog/assets/js/14.daf4f2c0.js"><link rel="prefetch" href="/blog/assets/js/15.a4c44285.js"><link rel="prefetch" href="/blog/assets/js/16.92fe1eeb.js"><link rel="prefetch" href="/blog/assets/js/17.e39974e7.js"><link rel="prefetch" href="/blog/assets/js/18.6ccb6f9d.js"><link rel="prefetch" href="/blog/assets/js/19.f3876cb8.js"><link rel="prefetch" href="/blog/assets/js/20.6f404d25.js"><link rel="prefetch" href="/blog/assets/js/21.e54a9beb.js"><link rel="prefetch" href="/blog/assets/js/22.63c737a5.js"><link rel="prefetch" href="/blog/assets/js/23.b96f4553.js"><link rel="prefetch" href="/blog/assets/js/3.9db5bc43.js"><link rel="prefetch" href="/blog/assets/js/4.c3eb0cb1.js"><link rel="prefetch" href="/blog/assets/js/5.8befe194.js"><link rel="prefetch" href="/blog/assets/js/6.8837a3c6.js"><link rel="prefetch" href="/blog/assets/js/7.b342f448.js"><link rel="prefetch" href="/blog/assets/js/9.816e0207.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.8b6be189.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/img/logo.png" alt="hx's blog" class="logo"> <span class="site-name can-hide">hx's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/returnMaize/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/returnMaize/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>VueåŸç†ç¯‡</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>å·¥ç¨‹åŒ–ç¯‡</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>eslint</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/engineering/eslint.html" class="sidebar-link">eslintåŸºç¡€çŸ¥è¯†</a></li><li><a href="/blog/engineering/eslint-ts.html" class="sidebar-link">eslint + ts</a></li><li><a href="/blog/engineering/eslint-vue.html" class="sidebar-link">eslint + vue</a></li><li><a href="/blog/engineering/eslint-prettier.html" class="sidebar-link">eslint + prettier</a></li></ul></section></li><li><a href="/blog/engineering/prettier.html" class="sidebar-link">prettier</a></li><li><a href="/blog/engineering/commitlint.html" class="sidebar-link">commitlint</a></li><li><a href="/blog/engineering/code-standard.html" aria-current="page" class="active sidebar-link">ç¼–ç è§„èŒƒå·¥ç¨‹åŒ–</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/engineering/code-standard.html#ä»‹ç»" class="sidebar-link">ä»‹ç»</a></li><li class="sidebar-sub-header"><a href="/blog/engineering/code-standard.html#ç›®æ ‡" class="sidebar-link">ç›®æ ‡</a></li><li class="sidebar-sub-header"><a href="/blog/engineering/code-standard.html#æŠ€æœ¯é€‰å‹" class="sidebar-link">æŠ€æœ¯é€‰å‹</a></li><li class="sidebar-sub-header"><a href="/blog/engineering/code-standard.html#é…ç½®" class="sidebar-link">é…ç½®</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="header-anchor">#</a> ä»‹ç»</h2> <p>åœ¨ååŒå¼€å‘ä¸­ï¼Œè§„èŒƒåŒ–ä»£ç è§„èŒƒæ˜¯éå¸¸é‡è¦çš„ã€‚æˆ‘ä»¬æœŸæœ›å›¢é˜Ÿæ‰€æœ‰æˆå‘˜çš„éƒ½èƒ½æŒ‰ç…§ç›¸åŒçš„ä»£ç è§„èŒƒå’Œé£æ ¼ç¼–å†™ä»£ç ï¼Œå¹¶ä¸”æäº¤ä¿¡æ¯è§„èŒƒä¹Ÿä¸€è‡´ã€‚è¿™å¯¹ code review å’ŒåæœŸç»´æŠ¤éå¸¸é‡è¦ï¼Œå¹¶ä¸”ä¸€å®šçš„è§„èŒƒçº¦æŸä¹Ÿèƒ½é¿å…ä»£ç çš„æ•…éšœç‡ã€‚</p> <h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="header-anchor">#</a> ç›®æ ‡</h2> <p>ï¼ˆä»¥ <code>vue</code> é¡¹ç›®ä¸ºä¾‹ï¼‰</p> <ul><li>ç»Ÿä¸€å•æ–‡ä»¶ vue å’Œ ts ä»£ç çš„è§„èŒƒ</li> <li>ç»Ÿä¸€å›¢é˜Ÿæ ¼å¼åŒ–é£æ ¼ï¼ˆä¸€é”®æ ¼å¼åŒ–ï¼‰</li> <li>ç»Ÿä¸€å›¢é˜Ÿä¿¡æ¯æäº¤è§„èŒƒ</li> <li>ä»£ç æäº¤ä»“åº“å‰ä¸€ä»¶æ ¼å¼åŒ–æ‰€æœ‰ä»£ç å¹¶å¯¹ä¸ç¬¦åˆç¼–ç è§„èŒƒçš„ä»£ç è¿›è¡Œæ‹¦æˆªï¼Œä¸å…è®¸æäº¤</li></ul> <h2 id="æŠ€æœ¯é€‰å‹"><a href="#æŠ€æœ¯é€‰å‹" class="header-anchor">#</a> æŠ€æœ¯é€‰å‹</h2> <ul><li><code>vite</code> åˆå§‹åŒ–é¡¹ç›®ï¼ˆvue3 + tsï¼‰</li> <li><code>eslint</code> è§„èŒƒåŒ–å•æ–‡ä»¶ vue å’Œ ts ç¼–ç è§„èŒƒ</li> <li><code>prettier</code> ç»Ÿä¸€æ ¼å¼åŒ–</li> <li><code>commitlint</code> ç»Ÿä¸€æäº¤è§„èŒƒ</li> <li><code>husky</code> å’Œ <code>lint-staged</code> å®ç°ä»£ç æäº¤å®ˆå«ï¼ˆæ‹¦æˆªä¸ç¬¦åˆè§„èŒƒçš„ä»£ç å’Œæäº¤ä¿¡æ¯ï¼‰</li></ul> <h2 id="é…ç½®"><a href="#é…ç½®" class="header-anchor">#</a> é…ç½®</h2> <h3 id="é¡¹ç›®åˆå§‹åŒ–"><a href="#é¡¹ç›®åˆå§‹åŒ–" class="header-anchor">#</a> é¡¹ç›®åˆå§‹åŒ–</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">pnpm</span> create vite
âœ” Project name: â€¦ your-project
âœ” Select a framework: â€º Vue
âœ” Select a variant: â€º TypeScript
</code></pre></div><p>è¿™é‡Œä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ <code>pnpm create</code>ï¼Œè€Œé <code>npm create</code>ã€‚<code>pnpm</code> æ˜¯ä¸€æ¬¾æ–°å‹çš„åŒ…ç®¡ç†å·¥å…·ï¼Œä½ å¯ä»¥é€šè¿‡é˜…è¯» <a href="https://pnpm.io/motivation" target="_blank" rel="noopener noreferrer">pnpm docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> è¿›è¡Œäº†è§£ã€‚å¦å¤–å¦‚æœä½ ä¸äº†è§£ <code>npm create</code> æ˜¯ä»€ä¹ˆå‘½ä»¤ï¼Œä½ åŒæ ·å¯ä»¥é€šè¿‡é˜…è¯» <a href="https://docs.npmjs.com/cli/v8/commands/npm-init" target="_blank" rel="noopener noreferrer">npm docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> è¿›è¡Œäº†è§£ã€‚å®ƒå…¶å®æ˜¯ <code>npm init</code> çš„åˆ«åï¼Œæ‰§è¡Œ <code>npm create vite</code> ç­‰åŒäºæ‰§è¡Œ <code>npx create-vite</code>ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äº <code>create-vite</code> è„šæ‰‹æ¶çš„å†…å®¹ï¼Œå¯ä»¥é˜…è¯» <a href="https://github.com/vitejs/vite/tree/main/packages/create-vite" target="_blank" rel="noopener noreferrer">create-vite RAEDME<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> è¿›è¡Œäº†è§£</p> <p>ç°åœ¨æˆ‘ä»¬ä¾¿æ‹¥æœ‰äº†ä¸€ä¸ª vue + ts çš„é¡¹ç›®ï¼Œåœ¨è§„èŒƒåŒ–ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æˆ‘ä»¬çš„é¡¹ç›®ç¯å¢ƒè¿›è¡Œä¸€å®šçš„é™åˆ¶ã€‚å›¢é˜Ÿçš„æˆå‘˜å¿…é¡»ä½¿ç”¨ <code>pnpm</code> å®‰è£…é¡¹ç›®ä¾èµ–ï¼Œä¸” <code>node</code> ç‰ˆæœ¬å¿…é¡»å¤§äºç­‰äº <code>16+</code>ã€‚</p> <p><strong>package.json</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token property">&quot;preinstall&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npx only-pnpm&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;engines&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&gt;=16.19.1&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>.npmrc</strong></p> <div class="language- extra-class"><pre class="language-text"><code>engine-strict = true
</code></pre></div><p>ä¹‹æ‰€æœ‰éœ€è¦å¯¹ node ç‰ˆæœ¬è¿›è¡Œä¸€å®šçš„çº¦æŸï¼Œæ˜¯å› ä¸º <code>pnpm</code> å’Œ <code>vite</code> å¯¹ <code>node</code> ç¯å¢ƒéƒ½æœ‰ä¸€å®šçš„è¦æ±‚ã€‚</p> <h3 id="_1-ä½¿ç”¨-eslint-è§„èŒƒåŒ–å•æ–‡ä»¶-vue-å’Œ-ts"><a href="#_1-ä½¿ç”¨-eslint-è§„èŒƒåŒ–å•æ–‡ä»¶-vue-å’Œ-ts" class="header-anchor">#</a> 1. ä½¿ç”¨ <code>eslint</code> è§„èŒƒåŒ–å•æ–‡ä»¶ vue å’Œ ts</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># å®‰è£… eslint</span>
<span class="token function">pnpm</span> i eslint <span class="token parameter variable">-D</span>
<span class="token comment"># å®‰è£… eslint-plugin-vue ä½¿ç”¨ vue3 æ¨èè§„èŒƒ</span>
<span class="token comment"># å®‰è£… vue-eslint-parser è§£æ vue è¯­æ³•ä¸º AST ä½¿å¾— eslint èƒ½å¤Ÿå®Œæˆè¯­æ³•æ£€æŸ¥</span>
<span class="token function">pnpm</span> <span class="token function">install</span> --save-dev eslint-plugin-vue vue-eslint-parser
<span class="token comment"># å®‰è£… @typescript-eslint/eslint-plugin ä½¿ç”¨ ts æ¨èçš„è¯­æ³•è§„èŒƒå’Œç±»å‹è§„èŒƒ</span>
<span class="token comment"># å®‰è£… @typescript-eslint/parser è§£æ ts è¯­æ³•ä¸º AST ä½¿å¾— eslint èƒ½å¤Ÿå®Œæˆè¯­æ³•æ£€æŸ¥</span>
<span class="token function">pnpm</span> <span class="token function">install</span> --save-dev @typescript-eslint/parser @typescript-eslint/eslint-plugin
</code></pre></div><p><strong>.eslintrc.js</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**@type {import('eslint').Linter.Config} */</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">browser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">es6</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'eslint:recommended'</span><span class="token punctuation">,</span>
    <span class="token string">'plugin:vue/vue3-recommended'</span><span class="token punctuation">,</span>
    <span class="token string">'plugin:@typescript-eslint/recommended-type-checked'</span><span class="token punctuation">,</span>
    <span class="token string">'plugin:@typescript-eslint/stylistic-type-checked'</span><span class="token punctuation">,</span>
    <span class="token string">'prettier'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">'vue-eslint-parser'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">project</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">'@typescript-eslint/parser'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sourceType</span><span class="token operator">:</span> <span class="token string">'module'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">,</span> <span class="token string">'@typescript-eslint'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">overrides</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'plugin:@typescript-eslint/disable-type-checked'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">files</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'./**/*.!(ts)'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config
</code></pre></div><p><strong>package.json</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint 'src/**/*.{js,ts,vue}'&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸ºäº†èƒ½å¤Ÿå®æ—¶çš„è§‚å¯Ÿåˆ° <code>eslint</code> æ£€æŸ¥ä¹‹åçš„ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>vs code</code> ç¼–è¾‘å™¨ä¸­å®‰è£… <code>Eslint</code> æ’ä»¶ï¼Œå®ƒä¼šæ ¹æ®æˆ‘ä»¬ <code>.eslintrc.js</code> ä¸­çš„é…ç½®å®æ—¶çš„æ£€æŸ¥ä»£ç ï¼Œå¹¶ä¸”å°†æ£€æŸ¥ç»“æœåé¦ˆåˆ°ç¼–è¾‘å™¨ä¸­ã€‚</p> <p>å¦å¤–ï¼Œå¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºå•æ–‡ä»¶ vue å’Œ ts ä¸­çš„ lint è§„åˆ™ï¼Œå¯ä»¥æŸ¥çœ‹ <a href="https://eslint.vuejs.org/rules/" target="_blank" rel="noopener noreferrer">eslint-plugin-vue docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å’Œ <a href="https://typescript-eslint.io/rules/" target="_blank" rel="noopener noreferrer">typescript-eslint docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> è¿›è¡Œäº†è§£</p> <h3 id="_2-ä½¿ç”¨-prettier-è§„èŒƒä»£ç æ ¼å¼åŒ–"><a href="#_2-ä½¿ç”¨-prettier-è§„èŒƒä»£ç æ ¼å¼åŒ–" class="header-anchor">#</a> 2. ä½¿ç”¨ <code>prettier</code> è§„èŒƒä»£ç æ ¼å¼åŒ–</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># å®‰è£… prettier ç”¨äºä»£ç æ ¼å¼åŒ–ï¼ˆé”å®šç‰ˆæœ¬ï¼Œé˜²æ­¢å› ç‰ˆæœ¬å¯¼è‡´æ ¼å¼åŒ–ä¸ä¸€ï¼‰</span>
<span class="token function">pnpm</span> <span class="token function">install</span> --save-dev --save-exact prettier
<span class="token comment"># å®‰è£… eslint-config-prettier ç”¨äºè§£å†³ prettier å’Œ eslint ä»£ç é£æ ¼è§„èŒƒçš„å†²çª</span>
<span class="token function">pnpm</span> i eslint-config-prettier <span class="token parameter variable">-D</span>
</code></pre></div><p><strong>.eslintrc.js</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'eslint:recommended'</span><span class="token punctuation">,</span>
    <span class="token string">'plugin:vue/vue3-recommended'</span><span class="token punctuation">,</span>
    <span class="token string">'plugin:@typescript-eslint/recommended-type-checked'</span><span class="token punctuation">,</span>
    <span class="token string">'plugin:@typescript-eslint/stylistic-type-checked'</span><span class="token punctuation">,</span>
    <span class="token string">'prettier'</span><span class="token punctuation">,</span> <span class="token comment">// è¿™é‡Œ prettier éœ€è¦æ”¾æœ€åï¼Œå†²çªæ—¶å¯ä»¥è¦†ç›–ä»¥ä¸Šæ‰€æœ‰è§„åˆ™</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>.prettierrc.js</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/** @type {import(&quot;prettier&quot;).Options} */</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">tabWidth</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token literal-property property">semi</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">singleQuote</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config
</code></pre></div><p><strong>package.json</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token property">&quot;prettier&quot;</span><span class="token operator">:</span> <span class="token string">&quot;prettier . --write&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸ºäº†æ›´å¥½çš„ç¼–ç ä½“éªŒï¼Œæˆ‘ä¹Ÿå»ºè®®ä½ åœ¨ <code>vs code</code> ç¼–è¾‘å™¨ä¸­å®‰è£…ä¸€ä¸ª <code>Prettier</code> æ’ä»¶ï¼Œä»–èƒ½æ ¹æ®ä½ é¡¹ç›®ä¸­çš„ <code>.prettierrc.js</code> é…ç½®æ–‡ä»¶å’Œ <code>prettier</code> ç‰ˆæœ¬è¿›è¡Œæ ¼å¼åŒ–ï¼Œå®‰è£…å®Œæˆåå°†å…¶è®¾ç½®ä¸ºç¼–è¾‘å™¨é»˜è®¤çš„æ ¼å¼åŒ–å·¥å…·ã€‚å¹¶åœ¨ä¿å­˜æ–‡ä»¶æ—¶è‡ªåŠ¨è¿è¡Œå®ƒã€‚</p> <h3 id="_3-ä½¿ç”¨-commitlint-è§„èŒƒåŒ–ä¿¡æ¯æäº¤"><a href="#_3-ä½¿ç”¨-commitlint-è§„èŒƒåŒ–ä¿¡æ¯æäº¤" class="header-anchor">#</a> 3. ä½¿ç”¨ commitlint è§„èŒƒåŒ–ä¿¡æ¯æäº¤</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># å®‰è£… @commitlint/cli ç”¨äºæäº¤ä¿¡æ¯æ£€æŸ¥</span>
<span class="token comment"># å®‰è£… @commitlint/config-conventional æäº¤è§„èŒƒï¼ˆçº¦å®šå¼æäº¤ï¼‰</span>
<span class="token function">pnpm</span> <span class="token function">install</span> --save-dev @commitlint/config-conventional @commitlint/cli`
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># å®‰è£… husky</span>
<span class="token function">pnpm</span> <span class="token function">install</span> husky --save-dev
</code></pre></div><p><strong>commitlint.config.js</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@commitlint/config-conventional'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># å®‰è£… husky</span>
<span class="token function">pnpm</span> <span class="token function">install</span> husky --save-dev
<span class="token comment"># å¯ç”¨ git hooks</span>
npx husky <span class="token function">install</span>
<span class="token comment"># å®‰è£… commit-msg é’©å­ï¼Œå¹¶åœ¨æ­¤é’©å­ä¸­æ‰§è¡Œ commitlint å®Œæˆæäº¤ä¿¡æ¯æ£€æŸ¥</span>
npx husky <span class="token function">add</span> .husky/commit-msg  <span class="token string">'npx --no -- commitlint --edit ${1}'</span>
</code></pre></div><p><strong>package.json</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token comment">// å…¶ä»–æˆå‘˜å®‰è£…å®Œä¾èµ–åè‡ªåŠ¨å¯åŠ¨ git hooksï¼Œè¿™åœ¨ååŒå¼€å‘ä¸­å¾ˆæœ‰ç”¨</span>
    <span class="token property">&quot;prepare&quot;</span><span class="token operator">:</span> <span class="token string">&quot;husky install&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-ä½¿ç”¨-lint-staged-å®Œæˆä»£ç æäº¤å®ˆå«"><a href="#_4-ä½¿ç”¨-lint-staged-å®Œæˆä»£ç æäº¤å®ˆå«" class="header-anchor">#</a> 4. ä½¿ç”¨ lint-staged å®Œæˆä»£ç æäº¤å®ˆå«</h3> <p>ä¸Šé¢æˆ‘ä»¬å®Œæˆäº†æˆå‘˜ç¼–ç è¿‡ç¨‹ä¸­çš„è§„èŒƒæ ¡éªŒå’Œæ ¼å¼åŒ–ç»Ÿä¸€ï¼Œè™½ç„¶å·²ç»åœ¨ç†è®ºä¸Šå¯ä»¥ä¿è¯å›¢é˜Ÿä¸­çš„ç¼–ç è§„èŒƒã€‚ä½†ä¸€ä¸ªå›¢é˜Ÿä¸­å¾€å¾€æ€»æ˜¯æœ‰é‚£ä¹ˆå‡ ä¸ªç‰¹ç«‹ç‹¬è¡Œï¼Œä»–ä»¬å¯èƒ½ä¸ä¼šä¿®å¤ <code>linter</code> å·¥å…·æ£€æµ‹å‡ºæ¥çš„é”™è¯¯ï¼Œä»–ä»¬å¯èƒ½ä¹Ÿä¸ä¼šä½¿ç”¨ <code>prettier</code> è¿›è¡Œä»£ç æ ¼å¼åŒ–ã€‚ä¸ºæ­¤æˆ‘ä»¬éœ€è¦åœ¨ä»£ç æäº¤å‰åŠ æœ€åä¸€é“é˜²çº¿ï¼Œé˜²æ­¢ä¸ç¬¦åˆè§„èŒƒçš„ä»£ç è¢«æäº¤åˆ°ä»“åº“ä¸­ã€‚</p> <p><strong>å®‰è£… lint-staged</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># å®‰è£… lint-staged</span>
<span class="token function">pnpm</span> <span class="token function">install</span> --save-dev lint-staged
<span class="token comment"># å®‰è£… pre-commit é’©å­ï¼Œä¸”åœ¨é’©å­ä¸­æ‰§è¡Œ lint-staged</span>
npx husky <span class="token function">add</span> .husky/pre-commit <span class="token string">&quot;npx lint-staged&quot;</span>
</code></pre></div><p><strong>é…ç½® lint-staged</strong></p> <p>package.json</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;*.{js,ts,vue}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;prettier -l&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;eslint&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;*.{md,json,css,scss}&quot;</span><span class="token operator">:</span> <span class="token string">&quot;prettier -l&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è‡ªæ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆä»£ç æäº¤çš„å®ˆå«å·¥ä½œã€‚å½“å…¶ä»–æˆå‘˜æäº¤ä»£ç æ—¶ï¼Œé¦–å…ˆä¼šæ£€æŸ¥ä»£ç æ˜¯å¦éƒ½æ˜¯ç”¨ <code>prettier</code> å®Œæˆæ ¼å¼åŒ–ï¼Œç„¶åæ£€æŸ¥ä»£ç æ˜¯å¦éƒ½é€šè¿‡ <code>eslint</code> çš„è§„èŒƒæ£€æŸ¥ï¼Œæœ€åå†æ ¡éªŒæäº¤ä¿¡æ¯æ˜¯å¦ç¬¦åˆçº¦å®šå¼è§„èŒƒ ğŸ‰ã€‚</p> <p>æœ€åï¼šå¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äº lint-staged å†…å®¹ï¼Œå¯ä»¥æŸ¥çœ‹ <a href="https://www.npmjs.com/package/lint-staged" target="_blank" rel="noopener noreferrer">lint-staged README<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/blog/engineering/commitlint.html" class="prev">
        commitlint
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.c5beb7e7.js" defer></script><script src="/blog/assets/js/2.19337781.js" defer></script><script src="/blog/assets/js/8.5bf72cf8.js" defer></script>
  </body>
</html>
